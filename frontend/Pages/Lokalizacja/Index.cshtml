@page
@model IndexLokalizacjaModel
@{
    ViewData["Title"] = "Lista lokalizacji";
    if (Request.Cookies.TryGetValue("UserId", out string id) && Request.Cookies.TryGetValue("UserRole", out string rola))
    {
        if (rola == "Wolontariusz")
        {
            Layout = "_Layout_wolontariusz";
        }
        else if (rola == "Pracownik")
        {
            Layout = "_Layout_pracownik";
        }
        else if (rola == "Opiekun")
        {
            Layout = "_Layout_opiekun";
        }
    }
    else
    {
        RedirectToPage("./Index");
    }
}

<h1>Lista wszystkich lokalizacji œwiadczenia us³ugi</h1>

<table class="table">
    <thead>
        <tr>
            <th>
                Nazwa
            </th>
            <th>
                Miasto
            </th>
            <th>
                DlugoscGeo
            </th>
            <th>
                SzerokoscGeo
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.Lokalizacja) {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Nazwa)
                </td>
                <td>
                        @Html.DisplayFor(modelItem => item.Miasto)
                </td>
                <td>
                        @Html.DisplayFor(modelItem => item.DlugoscGeo)
                </td>
                <td>
                        @Html.DisplayFor(modelItem => item.SzerokoscGeo)
                </td>
                <td>
                    @if (Request.Cookies.TryGetValue("UserRole", out string p) && "Pracownik" == p)
                    {
                        <a asp-page="./Edit" asp-route-id="@item.Id" class="btn btn-primary">Edytuj</a>
                        <a asp-page="./Details" asp-route-id="@item.Id" class="btn btn-primary">Szczegó³y</a>
                        <a asp-page="./Delete" asp-route-id="@item.Id" class="btn btn-primary">Usuñ</a>
                    }
                </td>
            </tr>
        }
    </tbody>
</table>
